#include<iostream>
#include<string>
using namespace std;

template<class KeyType>
class Stack
{ //
private:
	KeyType * arr;
	KeyType top;
	int size;

public:
// constructor , creates an empty stack
Stack( int s)
{
	arr = new KeyType[s];
	top = -1;
	size = s;
}
char getTop()
{
	return top;
}
// returns true if Stack is full, otherwise return false
bool IsFull()
{
	if(top == size - 1)
		return true;
	else
		return false;
}

//If number of elements in the Stack is zero return true, otherwise return false
bool IsEmpty()
{
	if( top == -1)
		return true;
	else
		return false;
}

// If Stack is not full, insert item into the Stack. Must be an O(1) operation
void Push(const KeyType item)
{
	if(!IsFull()){
		top++;
		arr[top]=item;
	}
	else
		cout<<"Stack is full"<<endl;
}

// If Stack is empty return 0 or NULL;
// else return appropriate item from the Stack. Must be an O(1) operation
KeyType Pop()
{
	if(IsEmpty())
		return 0;
	else{
		top--;
		return arr[top+1];
	}
}

void postfixevaluate(char exp[])
{
	Stack<float> *s = new Stack<float>(100);
	for (int i=0; exp[i]!='\0';i++)
	{
		if(exp[i]>47 && exp[i]<58)
		{
			s->Push(exp[i]-'0');
		}
		else
		{
			switch (exp[i])
		{
			case '+' :
			s->Push(s->Pop()+s->Pop());
			break;
			case '-' :
			s->Push(s->Pop()-s->Pop());
			break;
			case '/' :
			s->Push(s->Pop()/s->Pop());
			break;
			case '*' :
			s->Push(s->Pop()*s->Pop());
			break;
		}
		}	
	}
	cout<<s->Pop()<<endl;

}


};
int main()
{   	
	Stack<int> *st =new Stack<int>(100);

	if(st->IsEmpty())
		cout<<"Stack is currently empty"<<endl;

	st->Push(1);
	st->Push(2);
	st->Push(3);

	while (!st->IsEmpty())
	{
		int value=st->Pop();
		cout<<value<<endl;
	}
	
	char exp[100];
	cout<<"enter an infix exp"<<endl;
	cin>>exp;
	//Stack<float> *s = new Stack<float>(100);
	//s->postfixevaluate(exp);
	cout<<"postfix expression : "<<endl;
	Stack<char> *stk= new Stack<char>(100);
	Stack<char> *pf= new Stack<char>(100);
	for (int i=0; exp[i]!='\0';i++)
	{
		if(exp[i]>96 && exp[i]<123 || exp[i]>64 && exp[i]<91 )
			cout<<exp[i];
		else if(exp[i]==40)
			stk->Push(exp[i]);
		else if(exp[i]>96 && exp[i]<123 || exp[i]>64 && exp[i]<91 )
		{
			pf->Push(exp[i]);
		}
		else
		{ 
			switch (exp[i])
		{
		case '+' :
			if( stk->getTop()!= 45 && stk->getTop()!= 42 && stk->getTop()!=47 )
				stk->Push(exp[i]);
			else
			{
				pf->Push(stk->getTop());
				stk->Push(exp[i]);
			}
			break;
		case '-' :
			if( stk->getTop()!= 43 && stk->getTop()!= 42 && stk->getTop()!=47 )
				stk->Push(exp[i]);
			else
			{
				pf->Push(stk->getTop());
				stk->Push(exp[i]);
			}
			break;
		case '*' :
			if ( stk->getTop()!=47 )
				stk->Push(exp[i]);
			else
				{
				pf->Push(stk->getTop());
				stk->Push(exp[i]);
			}
			break;
		case '/' :
			if ( stk->getTop()!=42 )
				stk->Push(exp[i]);
			else
				{
				pf->Push(stk->getTop());
				stk->Push(exp[i]);
			}
			break;	
		case '(':
			stk->Push(exp[i]);
			break;

		case ')':
			while(stk->getTop()!=40)
				pf->Push(stk->getTop());
			stk->Pop();
			stk->Pop();

			break;
		}

		}

	}
	
	while (!stk->IsEmpty())
	{
		char value=stk->Pop();
		cout<<value<<" "<<endl;
	}


	return 0;
}

