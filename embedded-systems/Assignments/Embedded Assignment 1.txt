EE419- Embedded Systems
Assignment # 1 

FAROOQ AHMAD
17L 4407
BEE-7A		

Question - 1 [CLO -1.1-1.3+2.1-2.4]
#include <iostd.h>
#include "inc/tm4cgh6pm.h"

#define GPIO_PORTA_DATA_R (*((volatile uint32_t *) 0x40004000))
#define GPIO_PORTA_DIR_R (*((volatile uint32_t *) 0x40004400))
#define GPIO_PORTA_AFSEL_R (*((volatile uint32_t *) 0x40004420))
#define GPIO_PORTA_PUR_R (*((volatile uint32_t *) 0x40004510))
#define GPIO_PORTA_DEN_R (*((volatile uint32_t *) 0x4000451C))
#define GPIO_PORTA_CR_R (*((volatile uint32_t *) 0x40004524))
#define GPIO_PORTA_AMSEL_R (*((volatile uint32_t *) 0x40004528))
#define GPIO_PORTA_PCTL_R (*((volatile uint32_t *) 0x4000452C))
#define SYSCTL_RCGCGPIO_R (*((volatile uint32_t *) 0x4000E108))
#define SW1 (GPIO_PORTA_DATA_R&0x01)

void PORT_A_Initialise(void)
{
	SYSCTL_RCGCGPIO_R  |= 0x00000001; //activation of clock for port A
	while((SYSCTL_PRGPIO_R&0x00000001) == 0){};//waiting for stablisation
	//no need to unlock portA
	GPIO_PORTA_CR_R = 0x0F; // allow changes to PA 3-0
	GPIO_PORTA_AMSEL_R = 0x00; // disable analog function
	GPIO_PORTA_PCTL_R = 0x00000000; // GPIO clear bit PCTL
	GPIO_PORTA_DIR_R = 0E; //pin 0 input, pin 1 2 3 output
	GPIO_PORTA_AFSEL_R = 0x00; // no alternate function
	GPIO_PORTA_PUR_R = 0x01; // enable pullup resistors on PA 0
	GPIO_PORTA_DEN_R = 0x0F; // enable digital pins PA 3-0
}


int main(void)
{   
	PORT_A_Initialise(); // Call initialization of port A
	while(1)
	{
	// SW1 takes input from PA 0
	if(SW1 == 0x00)
	{ // if switch is pressed
		GPIO_PORTA_DATA_R = GPIO_PORTA_DATA_R | 0x02; // output pin 1 LED is green
		while((GPIO_PORTA_DATA_R&0x02) == 0){};//waiting for stablisation
		delay(); //1 second	
		GPIO_PORTA_DATA_R = GPIO_PORTA_DATA_R | 0x04; // output pin 2 LED is red
		while((GPIO_PORTA_DATA_R&0x04) == 0){};//waiting for stablisation
		delay(); //1 second
		GPIO_PORTA_DATA_R = GPIO_PORTA_DATA_R | 0x08; // output pin 3 LED is blue
		while((GPIO_PORTA_DATA_R&0x08) == 0){};//waiting for stablisation
		delay(); //1 second
	}
	}
}


Question - 2 [CLO -1.4-1.5+2.5]

#define RED_LED *((volatile uint32_t *) 0x40025008
void PortF_Initialise(void)
{
	SYSCTL_RCGCGPIO_R |= 0x00000020; // 1) activate clock for Port F
	while((SYSCTL_PRGPIO_R&0x00000020) == 0){};// ready?
	GPIO_PORTF_LOCK_R = 0x4C4F434B; // 2) unlock GPIO Port F
	GPIO_PORTF_CR_R = 0x02;
	GPIO_PORTF_DIR_R = 0x02;
	GPIO_PORTF_PUR_R = 0x11;
	GPIO_PORTF_DEN_R = 0x02;
}

void delay(void)
{
	SysTick->LOAD = 15999;
	SysTick->CTRL = 0x5;
	while((SysTick->CTRL & 0x10000) == 0){} //wait for the flag
	SysTick->CTRL = 0;
}

void SysTick_AddDelay(uint32_t x)
{
	unsigned long i;
	for(i=0; i<x; i++)
	delay();	
}

void main(void)
{
	PortF_Initialise();
	while(1){
	RED_LED = RED_LED ^ 0x02;
	SysTick_AddDelay(250);} //delay 0.25 second
}


