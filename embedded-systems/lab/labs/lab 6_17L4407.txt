#include <stdio.h>
#include <stdint.h>
#include <stdbool.h>
#include "inc/tm4c123gh6pm.h"

void UART0Tx(char);
char UART0Rx(void);
void sendString(char*);


int main(void)
{
    SYSCTL_RCGCUART_R |= 1;  /* provide clock to UART0 */
    SYSCTL_RCGCGPIO_R |= 1;  /* enable clock to PORTA */

    /* UART0 initialization */
    UART0_CTL_R = 0;         /* disable UART0 */
    UART0_IBRD_R = 104;      /* 16MHz/16=1MHz, 1MHz/104=9600 baud rate */
    UART0_FBRD_R = 11;       /* fraction part, see Example 4-4 */
    UART0_CC_R = 0;          /* use system clock */
    UART0_LCRH_R = 0x60;     /* 8-bit, no parity, 1-stop bit, no FIFO */
    UART0_CTL_R = 0x301;     /* enable UART0, TXE, RXE */

    /* UART0 TX0 and RX0 use PA0 and PA1. Set them up. */
    GPIO_PORTA_DEN_R = 0x03;      /* Make PA0 and PA1 as digital */
    GPIO_PORTA_AFSEL_R = 0x03;    /* Use PA0,PA1 alternate function */
    GPIO_PORTA_PCTL_R = 0x11;     /* configure PA0 and PA1 for UART */
uint32_t i;
char x;
for (i=0;i<200000;i++);




        for(;;)
       {
        sendString("\n\rEnter Character to send: ");

        x= UART0Rx();
        UART0Tx(x);

        sendString("\n\rNext character is: ");
        UART0Tx(x+1);
       }
}
void sendString(char*ptr)
{
while(*ptr)
{
    UART0Tx(*ptr);
    ptr++;
}
}

void UART0Tx(char c)
{
    while((UART0_FR_R & 0x0020) !=0); /* wait until Tx buffer is full  */
    UART0_DR_R = c;                  /* before giving it another byte */
}

char UART0Rx(void){
while ((UART0_FR_R&0x0010)!=0);
return ((char)(UART0_DR_R&0xFF));
}